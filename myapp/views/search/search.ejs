<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>


<style>
.dropbtn {
    background-color: violet;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown a:hover {background-color: #f1f1f1}

.show {display:block;}
</style>


</head>

<body>
<header>
    <% include ../partials/header %>
</header>

<div class="container text-center">
    <div class="row">
        <div class="col-sm-12">
<br>
      <form class="search" action="search" method="get">
        <div class="input-group">
          <div class="input-group-addon"><span><i class="glyphicon glyphicon-search"></i></span></div>
          <input id="search_box" class="form-control search bar" type="text" placeholder="Enter Street, City, State, or Zip" maxlength="40" name="q">
          <div class="input-group-btn"><button  class="btn btn-success" type="submit">Search </button></div>
        </div>
      </form>

        </div>
    </div>


<br>

    <div class="row">
        <div class="col-sm-12">
            <br>
            <% if ( data.length) { %>
            <h4> Found <%= (data.length ) %> Results</h4>
            <% } %>
            <% if (data.length == 0) { %>
            <h4> No Result Found </h4>
            <% } %>
            <br>
        </div>
    </div>
</div>

<div class="container">

<% for (var i = 0; i < data.length; i++) { %>
<div class="row">

    <div class="col-sm-12 col-xs-12 col-md-2 col-lg-2">
</div>

    <hr>
    <div class="col-sm-12 col-xs-12 col-md-4 col-lg-4">
        <img id="searchImage" class="thumbnail" src="https://sfsuse.com/fa17g02/images/<%= data[i].Image %>" class="img-responsive center-block"/>
    </div>

    <div id="searchDescription" class="col-sm-12 col-xs-12 col-md-6 col-lg-6">
        <ul style="list-style-type:none">
            <li id="address" name="address"><b> Address: </b> <%= data[i].Address %> </li>
            <li id="city"><b> City: </b> <%= data[i].City %> </li>
            <li id="state"><b> State: </b> <%= data[i].State %> </li>
            <li id="zip"><b> Zip: </b> <%= data[i].Zip %> </li>
            <li id="price"><b> Price: </b> <%= data[i].Price %> </li>
	    <li id="bedrooms"><b> Bedrooms: </b> <%= data[i].Bedrooms %> </li>
            <li id="bathrooms"><b> Bathrooms: </b> <%= data[i].Bathrooms %> </li>
	</ul>
        <a href="/fa17g02/listing/<%= data[i].id %>" class="btn btn-primary" style="float: left">View Property</a>
    </div>
</div>
<% } %>

<% if (data.length == 0) { %>
<div class="text-center col-sm-12 col-xs-12 col-md-12 col-lg-12">

    <div class="container site-section" id="featuredHouses">
        <h3> Featured Houses</h3>
        <div class="col-md-12">
            <div class="row">
               <div class="col-md-4 col-sm-12">
                <div class="thumbnail">
                 <a href="https://sfsuse.com/fa17g02/listing/1">
                  <img src="https://sfsuse.com/fa17g02/images/business.jpg" />
              <div class="row house-text-details">
               <div class="col-md-12">
                   <p> 1600 Holloway Avenue , San Francisco, CA 94132</p>
                </a>
               </div>
           </div>
       </div>
   </div>
               <div class="col-md-4 col-sm-12">
                <div class="thumbnail">
                 <a href="https://sfsuse.com/fa17g02/listing/3">
                  <img src="https://sfsuse.com/fa17g02/images/cesarChavez.jpg" />
              <div class="row house-text-details">
               <div class="col-md-12">
                   <p> 1600 Holloway Avenue , San Jose, CA 94132</p>
                </a>
               </div>
           </div>
       </div>
   </div>
               <div class="col-md-4 col-sm-12">
                <div class="thumbnail">
                 <a href="https://sfsuse.com/fa17g02/listing/5">
                  <img src="https://sfsuse.com/fa17g02/images/library.jpg" />
              <div class="row house-text-details">
               <div class="col-md-12">
                   <p>835 Market Street, San Francisco, CA, 94103</p>
                </a>
               </div>
           </div>
       </div>
   </div>
</div>
<% } %>
</div>

    <div id="emp">
    </div>

<div id=footer>
    <% include ../partials/footer %>
</div>

<% include ../partials/style %>
<% include ../partials/plugins %>

<script>

<script>
$(document).ready(function(){
    var search_text = $("#search_box").val();

    $(".bedroom, .bathroom, .price").click(function(){
        $("#sort-by-"+$(this).attr('class')).val($(this).val());
        $("#sort-by-"+$(this).attr('class')).html($(this).text() + " <span class=\"caret\"></span>");
        $.ajax({
            type: "GET",
            url: "search/sortByPriceBedBath?search_text="+search_text+"&sortByPrice="+$("#sort-by-price").val()+"&bedroomValue="+$("#sort-by-bedroom").val()+"&bathroomValue="+$("#sort-by-bathroom").val(),
            contentType: "application/json",
            success: function(response){
                $("#searchResultsTable").html(response);
            },
            error: function(response){
                alert("Filter did not work: " +response.data);
            }
        });
    });
});

</script>


</body>
</html>

